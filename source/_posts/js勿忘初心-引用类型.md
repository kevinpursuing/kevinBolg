---
title: 引用类型
date: 2017-10-04 15:34:33
tags: js-勿忘初心
categories: js之路
---

引用类型的值（对象）是引用类型的衣蛾实例。在ECMAScript中，引用类型是一种数据结构，用于将数据和功能组织在一起。尽管ECMAScript从技术上讲是一门面向对象的语言，但它不具备传统的面向对象语言所支持的类和接口等基本结构

## Object类型

Object是ECMAScript中使用最多的一个类型。虽然Object的实力不具备多少功能，但对于应用程序中存储和传输数据而言，他们确实是非常理性的选择

> 创建Object实例的方式有两种
* 第一种是使用new操作符后跟Object构造函数

```
var person = new Object();
person.name = "Nicholas";
person.age = 29;
```
* 林一种方式是使用对象字面量表示法，目的在于简化创建包含大量属性的对象的过程

```
var persion = {
    name: "Nicholas",
    AGE: 29
}
```
*在使用对象字面量语法时，属性名也可以使用字符串*

**在JavaScript中也可以使用方括号表示法来访问对象的属性。在使用方括号语法是，应该将要访问的属性以字符串的形式放在方括号中**

## Array类型

虽然ECMAScript数组与其他语言中的数组都输数据的有序列表，但与其他语言不通的是，ECMAScript数组的每一项可以保存任何类型的数据。而且，ECMAScript数组的大小是可以动态调整的，即可以随着数据的添加自定增长以容纳新数据

```
var colors = new Array(20);
var color = new Array("red","blue","green")
```
*当然，给构造函数传递一个值也可以创建数组。但这时候问题就复杂一点了，因为如果传递是的数值，则会按照该数值创建包含给定项数的数组，而如果传递的是其他类型的参数，则会创建包含那个值得只有一项的数组*

另外，在使用Array构造函数时也可以省略new操作符。
```
var colors = Array(3);
var names = Array("Greg")
```

创建数组的第二种基本方式是使用数组字面量表示法

**数组的项数保存在其length属性中，这个属性始终会返回0或更大的值**

**数组的length属性很有特点--他不是只读的，因此，通过设置这个属性，可以从数组的末尾移除项或想数组中添加新的项**

*当把一个值放在超出当前数组大小的位置上时，数组就会重新就按其长度值，即长度值等于最后一项的索引加1*

### 检测数组
**instanceof操作符的问题在于，它嘉定只有一个全局执行环境。如何网页中包含多个框架，那实际上就存在两个以上不同的全局执行环境，从而存在两个以上不同版本的Array构造函数**

为了解决这个问题，在ECMAScript5新增了Array.isArray()方法。这个方法的目的是最终确定某个值到底是不是数组，而不管它是在哪个全局执行环境中创建的
```
if(Array.isArray(value){
    //对数组执行某些操作
})
```

数组继承的toLocaleString(),toString()和valueOf()方法，在默认情况下的都会以逗号分隔的字符串的形式返回数组项，而如果使用join()方法，则可以使用不同的分隔符来构建这个字符串。join()方法只接收一个参数，即用作分隔符的字符串，然后返回包含所有数组项的字符串

```
vae colors = ["red","green","blue"];
alert(colors.join(","));     //red,green,blue
alert(colors.join("||"));    //red||green||blue
```

### 栈方法
ECMAScript为数组专门提供了push()和pop()方法，以便实现类似栈的行为

**push()方法可以接收任意数量的参数，把它们逐个添加到数组末尾，并返回修改后数组的长度。而pop()方法则从数组末尾移除最后一项，减少数组的length值，然后返回移除的项**

### 队列方法
**使用shift()和push()方法，可以像使用队列一样使用数组**
**使用unshift()和pop()方法，可以从相反的方向来模拟队列，即在数组的前端添加项，从数组的末端移除项**


### 重排序方法
reverse()和sort()

reverse()会反转数组的顺序

*对于数值类型或者其valueOf()方法会返回数值类型的对象类型，可以使用一个更简单搞得比较函数*

```
function compare(value1,value2) {
    return value1 - value2
}

var values = [100,1,5,10,15];
values.sort(compare);
alert(values);  // [1,5,10,15,100]
```

### 操作方法（对于数组）

*concat()方法基于当前数组中的所有项创建一个新数组，具体来说，这个方法会创建当前数组的一个副本，然后将接收到的参数添加到这个副本的末尾，最后返回新构建的数组*

*slice()方法基于当前数组中的一或多个项创建一个新数组。slice()方法可以接收一个或两个参数，即要返回项的起始和结束为止。在只有一个参数的情况下，slice()方法返回从该参数制定为止开始到当前数组末尾的所有项。如果有两个参数，该方法返回起始和结束为止之间的项但不包括结束位置的项*

**splice()方法，最强大的数组方法**

删除：可以删除任意数量的项，只需制定2个参数：要删除的第一项的文职和要删除的项数。例如，slice(0,2)会删除数组中的前两项

插入：可以向指定位置插入任意数量的项，只需提供3个参数：起始位置，0（要删除的项数）和要插入的项。例如，splice(2,0,"red","green")会从当前数组的位置2开始插入字符串"red"和"green"

替换：splice(2,1,"red","green")

*splice()方法始终都会返回一个数组，该数组中包含从原始数组中删除的项（如果没有删除任何项，则返回一个空数组）*


### 位置方法

ECMAScript5位数组实例添加了两个位置方法：indexOf()和lastIndexOf()。这两个方法都接收两个参数：要查找的项和（可选的）表示查找起点位置的索引。其中，indexOf()方法从数组的开头（位置0）开始向后查找，lastIndexOf()方法则从数组的末尾开始向前查找。
*这两个方法都返回要查找的项在数组中的位置，或者在没找到的情况下返回-1，在比较第一个参数和数组中的每一项时，会使用全等操作*

### 迭代方法

* every(): 对数组中的每一项运行给定函数，如果函数对每一下都返回true，则返回true
* filter(): 对数组中的每一项运行给定函数，返回该函数会返回true的项组成的数组
* forEach(): 对数组中的每一项运行给定函数，这个方法没有返回值
* map(): 对数组中的每一项运行给定函数，返回每次函数调用的结果组成的数组
* some(): 对数组中的每一项运行给定函数，如果该函数对任一项返回true，则返回true

*以上方法都不会改变数组中包含的值*

